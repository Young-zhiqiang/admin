webpackJsonp([1],{"8rSa":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},i,!1,function(e){a("NUhh")},null,null).exports,l=a("/ocq"),n=a("mtWM"),o=a.n(n),c={name:"list",data:function(){return{switch:!1,products:[],page:1,pageSize:50,total:null,removeall_id:[],name:"",options:[],price_areas:[{label:"全部",value:0},{label:"0-20",value:1},{label:"20-40",value:2},{label:"40以上",value:3}],filter:{keyword:"",category:[],price_area:0}}},methods:{refresh:function(){this.switch=!1,this.fetchData(),this.filter={keyword:"",category:[],price_area:0}},search:function(){this.switch=!0,this.page=1,this.searchData()},remove:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o()({url:"/api/ic/product",method:"delete",data:{id:e}}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.switch?t.searchData():t.fetchData()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSelectionChange:function(e){this.removeall_id=e.map(function(e){return e.id})},removeall:function(){var e=this;this.$confirm("此操作不可恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.removeall_id.length?o()({url:"/api/ic/product",method:"delete",data:e.removeall_id}).then(function(t){e.$message({type:"success",message:"删除成功!"}),e.switch?e.searchData():e.fetchData()}):e.$message({type:"waring",message:"请选中你要删除的商品!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.page=e,this.switch?this.searchData():this.fetchData()},fetchData:function(){var e=this;o()({url:"/api/ic/product",params:{page:this.page,pageSize:this.pageSize}}).then(function(t){var a=t.data.searchdata.map(function(e){return e.price=e.price/100,e});e.products=a,e.total=t.data.total})},searchData:function(){var e=this;o()({url:"/api/ic/product",params:{page:this.page,pageSize:this.pageSize,keyword:this.filter.keyword,category:this.filter.category.join(","),price_area:this.filter.price_area}}).then(function(t){var a=t.data.searchdata.map(function(e){return e.price=e.price/100,e});e.products=a,e.total=t.data.total})}},mounted:function(){var e=this;this.fetchData(),o()({url:"/api/ic/product",method:"get"}).then(function(t){var a=t.data.searchdata;e.options=function e(t){var r=[];return a.forEach(function(a){if(a.parent_id==t){var i={label:a.name,value:a.id},s=e(a.id);s.length&&(i.children=s),r.push(i)}}),r}(0)})}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"buttons"},[a("a",{staticStyle:{display:"inline-block"},attrs:{href:"#/add"}},[a("el-button",{attrs:{type:"primary"}},[e._v("添加商品"),a("i",{staticClass:"el-icon-plus el-icon--right"})])],1),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.removeall}},[e._v("批量删除"),a("i",{staticClass:"el-icon-delete el-icon--right"})])],1),e._v(" "),a("div",{staticClass:"buttons"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.filter.keyword,callback:function(t){e.$set(e.filter,"keyword",t)},expression:"filter.keyword"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-cascader",{attrs:{options:e.options},model:{value:e.filter.category,callback:function(t){e.$set(e.filter,"category",t)},expression:"filter.category"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-select",{attrs:{size:"mini",placeholder:"请选择价格区间"},model:{value:e.filter.price_area,callback:function(t){e.$set(e.filter,"price_area",t)},expression:"filter.price_area"}},e._l(e.price_areas,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"buttons"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[e.pageSize,100,200,300,400],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"商品成本"}},[a("span",[e._v(e._s(t.row.const_price))])]),e._v(" "),a("el-form-item",{attrs:{label:"店铺ID"}},[a("span",[e._v(e._s(t.row.shop_id))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品 ID"}},[a("span",[e._v(e._s(t.row.id))])]),e._v(" "),a("el-form-item",{attrs:{label:"店铺 ID"}},[a("span",[e._v(e._s(t.row.shopId))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品分类"}},[a("span",[e._v(e._s(t.row.category))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品描述"}},[a("span",[e._v(e._s(t.row.short_description))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品 ID",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.image,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",prop:"short_description"}}),e._v(" "),a("el-table-column",{attrs:{label:"价格",prop:"price"}}),e._v(" "),a("el-table-column",{attrs:{label:"库存",prop:"price"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""}}),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(a){e.remove(t.row.id)}}})]}}])})],1)],1)])},staticRenderFns:[]};var p=a("VU/8")(c,u,!1,function(e){a("i1cY"),a("luuW")},null,null).exports,m={name:"add",data:function(){return{pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value5:"",active:0,form:{category:[],image:[]},data:[],defaultProps:{children:"children",label:"label"},dialogImageUrl:"",dialogVisible:!1,rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],short_description:[{required:!0,message:"请输入商品描述",trigger:"blur"},{min:1,max:70,message:"长度在 1 到 70 个字符",trigger:"blur"}],meta_keywords:[{required:!0,message:"请输入商品关键字",trigger:"blur"},{min:1,max:70,message:"长度在 1 到 70 个字符",trigger:"blur"}],qty:[{required:!0,message:"请输入商品关键字",trigger:"blur"},{min:1,max:70,message:"长度在 1 到 70 个字符",trigger:"blur"}],price:[{required:!0,message:"请输入商品关键字",trigger:"blur"},{min:1,max:70,message:"长度在 1 到 70 个字符",trigger:"blur"}],special_price:[{required:!0,message:"请输入商品关键字",trigger:"blur"},{min:1,max:70,message:"长度在 1 到 70 个字符",trigger:"blur"}],spu:[{required:!0,message:"请输入商品关键字",trigger:"blur"},{min:1,max:70,message:"长度在 1 到 70 个字符",trigger:"blur"}],sku:[{required:!0,message:"请输入商品关键字",trigger:"blur"},{min:1,max:70,message:"长度在 1 到 70 个字符",trigger:"blur"}]}}},methods:{switch_changes:function(e){},success:function(e){this.form.image.push(e),console.log(this.form.image)},handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleCheckChange:function(e,t,a){console.log(e,t,a),t||a?this.form.category.push(e.data):this.form.category=this.form.category.filter(function(t){return t!=e.data})},next:function(){this.active++>=4&&(this.active=0)},prev:function(){this.active--<=0&&(this.active=4)},submit:function(e){var t=this,a=this.form.category;1!=a.length&&0!=a.length?(this.form.category=a.join(","),0!=this.form.image.length?(this.form.image=this.form.image.join(";"),this.$refs[e].validate(function(e){if(!e)return t.$message.error("请正确填写信息!"),!1;o()({url:"/api/ic/product",method:"put",data:t.form}).then(function(e){t.$message({type:"success",message:"创建成功!"})})})):this.$message.error("请上传商品图片")):this.$message.error("请选择商品分类")},change:function(e){this.form.parent_id=e[e.length-1],this.form.level=e.length+1}},mounted:function(){var e=this;o()({url:"/api/ic/category"}).then(function(t){console.log(t);var a=t.data;e.data=function e(t){return a.filter(function(e){return e.parent_id==t}).map(function(t){var a={label:t.name,data:t.id};return e(t.id).length&&(a.children=e(t.id)),a})}(0)})}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"130px",rules:e.rules}},[a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"基础信息"}}),e._v(" "),a("el-step",{attrs:{title:"价格信息"}}),e._v(" "),a("el-step",{attrs:{title:"分类信息"}}),e._v(" "),a("el-step",{attrs:{title:"图片信息"}}),e._v(" "),a("el-step",{attrs:{title:"其他信息"}})],1),e._v(" "),0==e.active?a("div",{staticClass:"item"},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品简短描述",prop:"short_description"}},[a("el-input",{model:{value:e.form.short_description,callback:function(t){e.$set(e.form,"short_description",t)},expression:"form.short_description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关键字",prop:"meta_keywords"}},[a("el-input",{model:{value:e.form.meta_keywords,callback:function(t){e.$set(e.form,"meta_keywords",t)},expression:"form.meta_keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"库存",prop:"qty"}},[a("el-input",{model:{value:e.form.qty,callback:function(t){e.$set(e.form,"qty",t)},expression:"form.qty"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上下架状态",prop:"is_in_stock"}},[a("el-switch",{on:{change:e.switch_changes},model:{value:e.form.is_in_stock,callback:function(t){e.$set(e.form,"is_in_stock",t)},expression:"form.is_in_stock"}})],1)],1):e._e(),e._v(" "),1==e.active?a("div",{staticClass:"item"},[a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"特价",prop:"special_price"}},[a("el-input",{model:{value:e.form.special_price,callback:function(t){e.$set(e.form,"special_price",t)},expression:"form.special_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"特价持续时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"成本价",prop:"const_price"}},[a("el-input",{model:{value:e.form.const_price,callback:function(t){e.$set(e.form,"const_price",t)},expression:"form.const_price"}})],1)],1):e._e(),e._v(" "),2==e.active?a("div",{staticClass:"item"},[a("el-form-item",{attrs:{label:"选择分类"}},[a("el-tree",{attrs:{"show-checkbox":"",data:e.data,props:e.defaultProps,accordion:""},on:{"check-change":e.handleCheckChange}})],1)],1):e._e(),e._v(" "),3==e.active?a("div",{staticClass:"item"},[a("el-form-item",{attrs:{label:"商品图片"}},[a("el-upload",{attrs:{action:"/api/ic/upload","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.success,multiple:""}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1):e._e(),e._v(" "),4==e.active?a("div",{staticClass:"item"},[a("el-form-item",{attrs:{label:"商品spu",prop:"spu"}},[a("el-input",{model:{value:e.form.spu,callback:function(t){e.$set(e.form,"spu",t)},expression:"form.spu"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品sku",prop:"sku"}},[a("el-input",{model:{value:e.form.sku,callback:function(t){e.$set(e.form,"sku",t)},expression:"form.sku"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("form")}}},[e._v("立即添加")])],1):e._e()],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.next}},[e._v("下一步")])],1)},staticRenderFns:[]};var d=a("VU/8")(m,f,!1,function(e){a("8rSa")},null,null).exports;r.default.use(l.a);var h=new l.a({routes:[{path:"/",name:"list",component:p},{path:"/add",name:"add",component:d}]}),g=a("zL8q"),v=a.n(g),_=a("6J2T"),b=a.n(_);a("tvR6");r.default.config.productionTip=!0,r.default.use(v.a),r.default.use(b.a),new r.default({el:"#app",router:h,components:{App:s},template:"<App/>"})},NUhh:function(e,t){},i1cY:function(e,t){},luuW:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.cc61b0a2060998362b63.js.map